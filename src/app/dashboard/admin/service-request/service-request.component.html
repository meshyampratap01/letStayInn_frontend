@if(isLoading){
    <div class="loading-overlay">
        <p-progress-spinner strokeWidth="3" fill="transparent" animationDuration=".5s" [style]="{ width: '50px', height: '50px' }" />
    </div>
}

<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>

<p-table [value]="requests()" class="request-table" responsiveLayout="scroll">
    <ng-template pTemplate="header">
        <tr>
            <th>Room</th>
            <th>Type</th>
            <th>Details</th>
            <th>Status</th>
            <th>Assignment</th>
            <th>Created</th>
            <th>Actions</th>
        </tr>
    </ng-template>

    <ng-template pTemplate="body" let-request>
        <tr>
            <td>{{ request.room_num }}</td>
            <td>{{ request.type }}</td>
            <td>{{ request.details }}</td>
            <td>
                <span [ngClass]="{
                    'status-assigned': request.status === 'assigned',
                    'status-pending': request.status === 'pending',
                    'status-inprogress': request.status === 'in progress',
                    'status-completed': request.status === 'completed'
                }">
                    {{ request.status }}
                </span>
            </td>
            <td>{{ request.is_assigned ? 'Assigned' : 'Unassigned' }}</td>
            <td>{{ request.created_at | date:'medium' }}</td>
            <td class="actions">

                <p-dropdown [options]="staffOptions" [(ngModel)]="request.EmployeeID" placeholder="Assign"
                    (onChange)="assignRequest(request)" [disabled]="request.status === 'assigned'" appendTo="body"
                    class="assign-dropdown">
                </p-dropdown>

            </td>
        </tr>
    </ng-template>
</p-table>
@if(isLoading){
    <div class="loading-overlay">
        <p-progress-spinner strokeWidth="3" fill="transparent" animationDuration=".5s" [style]="{ width: '50px', height: '50px' }" />
    </div>
}

<p-toast/>

<p-dialog header="New Service Request" [(visible)]="requestDialogVisible" [modal]="true" [style]="{ width: '30rem' }"
  [closable]="false" class="request-dialog">
  <div class="dialog-form">
    <div class="form-group">
      <label for="room">Room Number</label>
      <p-dropdown [options]="roomOptions" [(ngModel)]="selectedRoom" optionLabel="label" placeholder="Select Room"
        class="custom-input"></p-dropdown>
    </div>

    <div class="form-group">
      <label for="type">Request Type</label>
      <p-dropdown [options]="requestTypeOptions" [(ngModel)]="selectedType" optionLabel="label"
        placeholder="Select Type" class="custom-input"></p-dropdown>
    </div>

    <div class="form-group">
      <label for="details">Details</label>
      <textarea id="details" [(ngModel)]="requestDetails" rows="4" class="custom-input"
        placeholder="Describe your request..."></textarea>
    </div>
  </div>

  <div class="dialog-actions">
    <button pButton label="Cancel" class="btn-secondary" (click)="requestDialogVisible = false"></button>
    <button pButton label="Submit Request" class="btn-primary" (click)="submitRequest()"></button>
  </div>
</p-dialog>

<div class="customer-service">

  <!-- Header -->
  <div class="header">
    <h2>Service Requests</h2>
    <p class="subtitle">Request premium services for your comfort</p>


    <div class="action-buttons">
      <button class="btn btn-cleaning" (click)="requestCleaning()">Request Cleaning</button>
      <button class="btn btn-food" (click)="orderFood()">Order Food</button>
    </div>

  </div>

  <!-- Service Request Cards -->
  <div class="service-cards">

    <div *ngIf="serviceRequests.length === 0" class="no-requests">
      No service requests found.
    </div>

    <div class="service-card" *ngFor="let request of serviceRequests">
      <div class="card-header">
        <span class="type">{{ request.type | titlecase }} Request</span>
        <span class="status">{{ request.status }}</span>
      </div>
      <div class="card-body">
        <p><strong>Room:</strong> {{ request.room_num }}</p>
        <p><strong>Details:</strong> {{ request.details }}</p>
        <p><strong>Requested At:</strong> {{ request.created_at| date: 'dd MMM yyyy, hh:mm a' }}</p>
      </div>
    </div>
  </div>
</div>